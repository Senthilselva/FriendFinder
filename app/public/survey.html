<!DOCTYPE HTML>
<HTML>
<HEAD>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

<!-- Compiled and minified CSS materialize -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
<!-- Compiled and minified JavaScript- materialize -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
<style type="text/css">
  .picture{
    width:100px;
    height:100px;
  }
</style>
<title>Friend Finder - Survey</title>
</HEAD>
<BODY>

<nav class = "deep-purple lighten-1">
    <div class="nav-wrapper  container">
      <a href="#" class="brand-logo">Friend Finder</a>
      <!-- <ul id="nav-mobile" class="right hide-on-med-and-down"> -->
      <ul class="right hide-on-med-and-down">
      <li><a href="/#" class="waves-effect purple darken-4 btn">Home</a></li>
      </ul>
    </div>
</nav>
<br> <br>
<div class="container">
<form class="col s12">
<div class = "row">
  <div class="input-field col s6">
   <input placeholder="Name" id="name" type="text" >
      <label for="name">Name</label>
  </div>
</div>

<br> <br>
<div class = "row">
  <div class="input-field col s6">
   <input placeholder="URL" id="picture" type="text" >
      <label for="name">Picture</label>
  </div>
</div>

<br>
<hr>
<br>
  <div class = "row">
  <!--    Question 1 -->
  <p><strong>You like to spend Money</strong></p>
  <div class="input-field col s4">
      <select id = "qus1">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree) </option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label>You like to spend Money</label> -->
  </div>
  </div>
<br> 

  <div class = "row">
  <!--    Question 2 -->
  <p><strong> You like to stay in Hotels</strong></p>
  <div class="input-field col s4">
      <select id = "qus2">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label>You like to stay in Hotels</label> -->
  </div>
  </div>
<br> 

<div class = "row">
  <!--    Question 3 -->
  <p><strong>You can handle stress </strong></p>
  <div class="input-field col s4">
      <select id = "qus3">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label>You like to stay in Hotels</label> -->
  </div>
  </div>
<br> 


<div class = "row">
  <!--    Question 4 -->
  <p><strong>You like to taste different food.</strong></p>
  <div class="input-field col s4">
      <select id = "qus4">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label><strong> You like to stay in Hotels</strong></label> -->
  </div>
  </div>
<br> 

<div class = "row">
  <!--    Question 5 -->
  <p><strong>You go with the flow on a trip</strong></p>
  <div class="input-field col s4">
      <select id = "qus5">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label><strong> You like to stay in Hotels</strong></label> -->
  </div>
  </div>
<br> 

<div class = "row">
  <!--    Question 6 -->
  <p><strong>You like adventure.</strong></p>
  <div class="input-field col s4">
      <select id = "qus6">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label><strong> You like to stay in Hotels</strong></label> -->
  </div>
  </div>
<br> 


<div class = "row">
  <!--    Question 7 -->
  <p><strong>You like spa .</strong></p>
  <div class="input-field col s4">
      <select id = "qus7">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label><strong> You like to stay in Hotels</strong></label> -->
  </div>
  </div>
<br> 

<div class = "row">
  <!--    Question 8 -->
  <p><strong>Watch TV in the evening.</strong></p>
  <div class="input-field col s4">
      <select id = "qus8">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label><strong> You like to stay in Hotels</strong></label> -->
  </div>
  </div>
<br> 

<div class = "row">
<!--    Question 8 -->
  <p><strong>Watch TV in the evening.</strong></p>
  <div class="input-field col s4">
      <select id = "qus8">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
      <!-- <label><strong> You like to stay in Hotels</strong></label> -->
  </div>
  </div>
<br> 

<div class = "row">
<!--    Question 9 -->
  <p><strong>You are up after 12:00 AM everyday.</strong></p>
  <div class="input-field col s4">
      <select id = "qus9">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
  </div>
  </div>
<br> 

<div class = "row">
<!--    Question 10 -->
  <p><strong>You like to visit China.</strong></p>
   <div class="input-field col s4">
      <select id = "qus10">
        <option value="" disabled selected>Choose your option</option>
        <option value="1"> 1 (Strongly Disagree)</option>
        <option value="2"> 2</option>
        <option value="3"> 3</option>
        <option value="4"> 4</option>
        <option value="5"> 5 (Strongly Agree)</option>
      </select>
  </div>
  </div>
<br> 



<div class = "row container">
    <a class="waves-effect purple darken-4 btn" id="submit">Submit</a>
</div>

<hr>

<br> <br>
</div>
</form>
</div>




 <!-- Modal Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4>Your New Best Friend</h4>
      <h5 id="modalFriendName"> </h5>
      <br>
      <hr>
    </div> 
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect purple darken-4 btn-flat white-text">Done</a>
    </div>
  </div>





<footer class="footer">
  <div class="container">
  <!-- blue-text text-darken-2 -->
    <p><a class = "purple-text text-darken-2" href="/api/friendlist">API Friends List Link</a> | <a class = "purple-text text-darken-2" href="https://github.com/Senthilselva/FriendFinder">GitHub Repo</a></p>
  </div>
</footer>

</BODY>
</HTML>

<script type="text/javascript">
  $(document).ready(function() {
    //for materializewaves-effect purple darken-4 btn
    $('select').material_select();


$("#submit").on("click", function(){
    var isValid = true;
    var nameV = $("#name").val().trim();
    var pictureV = $("#picture").val().trim();

    if(!nameV || !pictureV){
      isValid = false;
    }

    var newFriend = {
      name: nameV,
      picture: pictureV,
      scores:[]
    }

    //create an array to post 
    for(var i=0; i<10; i++){
      var ans = $("#qus"+(i+1)).val();
      //console.log(ans)
        if(!ans){
          isValid = false;
        } else {
          newFriend.scores.push(ans);
        }

    }//for loop 

    if(!isValid){
      alert("All fieldss are required");
      return false;
    }


    var currentURL = window.location.origin;

        $.post(currentURL + "/api/friend", newFriend, function(data){

          var imgTag = $('<img>');
              imgTag.addClass('picture');
              imgTag.attr('src',data.photo);
          var nametag = $("#modalFriendName");
              nametag.text(data.name);
              $("#modalFriendName").append(imgTag);


          //console.log(data.name + JSON.stringify($("#modalFriendName")));
          $('.modal').openModal();
        });//POST

});//submit on click



}); //Document READY

</script>
